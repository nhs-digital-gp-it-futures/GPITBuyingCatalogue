@using NHSD.GPIT.BuyingCatalogue.Framework.Extensions
@using NHSD.GPIT.BuyingCatalogue.WebApp.Areas.Competitions.Controllers
@using NHSD.GPIT.BuyingCatalogue.WebApp.Areas.Solutions.Controllers
@using NHSD.GPIT.BuyingCatalogue.WebApp.Models.Shared.Shorlists
@model ResultsForFrameworkModel

@if (Model.CatalogueItems?.Any() ?? false)
{
    <hr class="nhsuk-u-padding-bottom-5 nhsuk-u-margin-bottom-5 nhsuk-u-margin-top-0">
    <div>
        <h2 class="nhsuk-heading-s nhsuk-u-margin-bottom-4">Results from @Model.Framework.ShortName (@Model.CatalogueItems.Count())</h2>
        <p class="nhsuk-body-s nhsuk-u-margin-top-3">You can only carry out competitions using solutions from the same framework. The results are grouped by framework so you can create a valid competition. </p>
        <p><b>All links open in a new tab.</b></p>
    </div>
    <h3></h3>
    @foreach (var solution in Model.CatalogueItems)
    {
        <div class="nhsuk-card nhsuk-card__inverted" data-foundation-cap="false">
            <div class="nhsuk-card__content">
                <h3 class="nhsuk-card__heading">
                    <a href="@Url.Action(
                        nameof(SolutionsController.Description),
                        typeof(SolutionsController).ControllerName(),
                        new { solutionId = solution.Id})" class="nhsuk-link" target="_blank">@solution.Name</a>
                    <span class="nhsuk-caption-m nhsuk-caption--bottom">
                        @solution.Supplier.Name
                    </span>
                </h3>
                <p class="nhsuk-card__description">
                    @solution.Solution.Summary
                </p>

            </div>
        </div>
    }
    <a class="nhsuk-button nhsuk-u-margin-bottom-3"
       asp-action="@(nameof(CompetitionsDashboardController.SaveCompetition))"
       asp-controller="@(typeof(CompetitionsDashboardController).ControllerName())"
       asp-route-internalOrgId="@(Model.InternalOrgId)"
       asp-route-filterId="@Model.FilterId"
       asp-route-frameworkId="@Model.Framework.Id"
       asp-route-fromFilter="@Model.FromFilter"
       asp-route-area="@(typeof(CompetitionsDashboardController).AreaName())">Create competition</a>
}
