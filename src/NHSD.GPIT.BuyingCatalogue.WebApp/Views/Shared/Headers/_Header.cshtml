@using NHSD.GPIT.BuyingCatalogue.WebApp.Areas.Identity.Controllers
@using NHSD.GPIT.BuyingCatalogue.WebApp.Models.Shared
@using Microsoft.AspNetCore.Mvc.TagHelpers
@using NHSD.GPIT.BuyingCatalogue.UI.Components.Views.Shared.Components.NhsLoginIcon

@{
    var navMenuModel = new NavigationMenuModel(User, Url, Context.Request.RouteValues);
}
<header class="nhsuk-header nhsuk-header--organisation" role="banner">
    <div class="nhsuk-width-container nhsuk-header__container">
    <partial name="Headers/_HeaderContent" />
    <div class="nhsuk-header__content" id="content-header">
        <div class="nhsuk-header__menu">
            <button class="nhsuk-header__menu-toggle" id="toggle-menu" aria-controls="header-navigation" aria-expanded="false">Menu</button>
        </div>
        <div class="nhsuk-account__login">
        @if (User.Identity?.IsAuthenticated ?? false)
        {
            <a class="nhsuk-account__login--link" href="@Url.Action(
                                                            nameof(YourAccountController.Index),
                                                            typeof(YourAccountController).ControllerName(),
                                                            new { area = typeof(YourAccountController).AreaName() } )">
                <vc:nhs-login-icon/>
                <b>Your account</b>
                | @User.Identity?.Name
            </a>
            <a class="nhsuk-account__login--link logout-link" href="@Url.Action( nameof(AccountController.Logout), typeof(AccountController).ControllerName(), new { area = typeof(AccountController).AreaName() })">Log out</a>
        }
        else
        {
                    <a class="nhsuk-account__login--link  logout-link" href="@Url.Action(
                                                            nameof(AccountController.Login),
                                                            typeof(AccountController).ControllerName(),
                                                            new { area = typeof(AccountController).AreaName() } )">
                <vc:nhs-login-icon />
                Log in
            </a>
        }
        </div>
    </div>
    </div><vc:nhs-navigation-panel title="Menu" items="@(navMenuModel.Links.ToList())"/>
</header>
