@model NHSD.GPIT.BuyingCatalogue.WebApp.Areas.Order.Models.AssociatedServices.EditAssociatedServiceModel;
@{
    ViewData["Title"] = Model.Title;
}

<div class="nhsuk-width-container" data-test-id="order-item-page">
    <partial name="Partials/_BackLink" model="Model" />
    <div class="nhsuk-grid-row">
        <div class="nhsuk-grid-column-two-thirds">
            <nhs-validation-summary />
            <nhs-page-title title="@Model.Title"
                            advice="Provide the price you've agreed with the supplier and the quantity you want to order." />
        </div>
        <form method="post">
            <input type="hidden" asp-for="@Model.BackLink" />
            <input type="hidden" asp-for="@Model.BackLinkText" />
            <input type="hidden" asp-for="@Model.OdsCode" />
            <input type="hidden" asp-for="@Model.Title" />
            <input type="hidden" asp-for="@Model.CurrencySymbol" />

            <div class="nhsuk-grid-column-two-thirds">
                <div class="nhsuk-u-margin-bottom-5">
                    <div class="">
                        <input type="hidden" asp-for="@Model.OrderItem.ServiceRecipients[0].Name" />
                        <input type="hidden" asp-for="@Model.OrderItem.ServiceRecipients[0].OdsCode" />
                        <nhs-bookended-input asp-for="@Model.OrderItem.ServiceRecipients[0].Quantity"
                                             label-text="How many do you think you'll need?" />
                        <nhs-details label-text="What quantity should i enter?">
                            Enter the estimated quantity you think you'll need either per month or per year.
                        </nhs-details>
                    </div>
                    
                    @if (Model.OrderItem.ProvisioningType == NHSD.GPIT.BuyingCatalogue.EntityFramework.Models.Ordering.ProvisioningType.OnDemand)
                    {
                        <div class="nhsuk-u-margin-bottom-5">
                            <div id="selectEstimationPeriod" data-test-id="question-selectEstimationPeriod">
                                <div data-test-id="radiobutton-options">
                                    <div class="nhsuk-form-group">
                                        <fieldset class="nhsuk-fieldset">
                                            <nhs-fieldset-form-label asp-for="@Model"
                                                                     label-text="Over what period did you estimate the quantity?"
                                                                     label-hint="Select one option.">
                                                <nhs-radio-buttons asp-for="@Model.TimeUnit"
                                                                   values="@Model.TimeUnits"
                                                                   value-name="Name"
                                                                   display-name="DisplayText" />
                                            </nhs-fieldset-form-label>
                                        </fieldset>
                                    </div>
                                </div>
                            </div>
                            <div data-test-id="view-section-estimation-period-id" class="">
                                <details class="nhsuk-details">
                                    <summary class="nhsuk-details__summary">
                                        <span class="nhsuk-details__summary-text">
                                            What period should I enter?
                                        </span>
                                    </summary>
                                    <div class="nhsuk-details__text">
                                        This should be based on how you estimated the quantity you want to order.
                                    </div>
                                </details>
                            </div>
                        </div>
                    }


                </div>
            </div>
            <div class="nhsuk-grid-column-full">
                <hr class="nhsuk-u-margin-top-0 nhsuk-u-margin-bottom-3 bc-c-order-table__hr" />
                <div data-test-id="price-table" class="nhsuk-u-margin-left-5 nhsuk-u-margin-top-0">
                    <table data-test-id="table" class="" style="page-break-inside:auto">
                        <thead data-test-id="table-headings" style="display:table-header-group;">
                        <th data-test-id="column-heading-0" class="nhsuk-u-padding-bottom-0 nhsuk-u-font-size-16" style="width:50%">
                            <div data-test-id="column-heading-0-data" class="nhsuk-u-font-weight-bold">What price have you agreed? (£)</div>
                        </th>
                        <th data-test-id="column-heading-1" class="nhsuk-u-padding-bottom-0 nhsuk-u-font-size-16" style="width:50%">
                            <div data-test-id="column-heading-1-data" class="nhsuk-u-font-weight-bold">Unit of order</div>
                        </th>
                        </thead>
                        <tbody>
                            <tr data-test-id="table-row-0" style="page-break-inside:avoid; page-break-after:auto">
                                <td class="nhsuk-u-padding-bottom-0" style="border-bottom-style: solid">
                                    <div data-test-id="">
                                        <div data-test-id="question-price">
                                            <div data-test-id="text-field-input">
                                                <div class="nhsuk-form-group nhsuk-u-margin-bottom-2">
                                                    <input class="nhsuk-input nhsuk-input--width-10" asp-for="@Model.OrderItem.Price" type="text">
                                                </div>
                                            </div>
                                            <div data-test-id="text-field-footer">
                                                <span class="nhsuk-label bc-t-font-color--grey-1 nhsuk-u-font-size-16">
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <div data-test-id="view-section-input-id" class="">
                                            <details class="nhsuk-details">
                                                <summary class="nhsuk-details__summary">
                                                    <span class="nhsuk-details__summary-text">
                                                        What price should I enter?
                                                    </span>
                                                </summary>
                                                <div class="nhsuk-details__text">
                                                    You can change the list price if you’ve agreed a different rate with the supplier.
                                                </div>
                                            </details>

                                        </div>
                                    </div>
                                </td>
                                <td class="nhsuk-u-padding-bottom-0" style="border-bottom-style: solid">
                                    <div data-test-id="unit-of-order" class="bc-c-data-text ">@Model.OrderItem.ItemUnit.Description @Model.OrderItem.TimeUnit?.Description</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="nhsuk-grid-column-full">
                <div class="bc-u-float-right">
                    <div class="bc-u-inline-block">
                        <div data-test-id="delete-button">
                            @if (Model.OrderItem.IsNewOrder)
                            {
                                <span class="nhsuk-button nhsuk-u-margin-top-9 nhsuk-button--secondary nhsuk-u-margin-right-5 nhsuk-button--disabled" href="/order/organisation/@Model.OdsCode/order/@Model.CallOffId/associated-services/delete/@Model.OrderItem.CatalogueItemId/confirmation/@Model.OrderItem.CatalogueItemName" draggable="false" aria-disabled="true">
                                    Delete
                                </span>
                            }
                            else
                            {
                                <a class="nhsuk-button nhsuk-u-margin-top-9 nhsuk-button--secondary nhsuk-u-margin-right-5" href="/order/organisation/@Model.OdsCode/order/@Model.CallOffId/associated-services/delete/@Model.OrderItem.CatalogueItemId/confirmation/@Model.OrderItem.CatalogueItemName" draggable="false">
                                    Delete
                                </a>
                            }
                        </div>
                    </div>
                    <div class="bc-u-inline-block">
                        <div data-test-id="save-button">
                            <button class="nhsuk-button nhsuk-u-margin-top-9" type="submit">
                                Save
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>






