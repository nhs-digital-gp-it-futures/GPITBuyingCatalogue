@model NHSD.GPIT.BuyingCatalogue.WebApp.Areas.Order.Models.AssociatedServices.AssociatedServiceModel
@{
    ViewData["Title"] = Model.Title;
}

<div class="nhsuk-width-container" data-test-id="associated-services-page">
    <partial name="Partials/_BackLink" model="Model" />
    <div class="nhsuk-grid-row">
        <div class="nhsuk-grid-column-two-thirds">

            <nhs-page-title title="@Model.Title" advice="Add the Associated Services you want to be part of this order, for example training days or data migration."
                            additional-advice="If you do not want to add any, or have finished adding Associated Services, continue to the next step." />

            <nhs-fieldset-form-container asp-for="@Model"
                                         label-text="Order description"
                                         label-hint="@Model.OrderDescription"
                                         size="Large">

                <vc:nhs-secondary-button url="/order/organisation/@Model.OdsCode/order/@Model.CallOffId/associated-services/select/associated-service"
                                         text="Add Associated Service" />

                @if (!Model.OrderItems.Any())
                {
                    <hr class="nhsuk-u-margin-top-0 nhsuk-u-margin-bottom-3 bc-c-order-table__hr" />
                    <div data-test-id="show-added-orderItems">
                        <div data-test-id="no-added-orderItems">
                            <p>No Associated Services added</p>
                        </div>
                    </div>
                }
                else
                {
                    <nhs-table>
                        <nhs-table-column>Associated Service</nhs-table-column>
                        <nhs-table-column>Unit of order</nhs-table-column>
                        @foreach (var item in Model.OrderItems)
                        {
                            <nhs-table-row-container>
                                <nhs-table-cell>
                                    <a data-test-id="@item.CatalogueItemId-catalogueItemName"
                                       href="/order/organisation/@Model.OdsCode/order/@Model.CallOffId/associated-services/@item.CatalogueItemId">@item.CatalogueItem.Name</a>
                                </nhs-table-cell>
                                <nhs-table-cell>
                                    <div class="bc-c-data-text ">@item.PricingUnit.Description @item?.PriceTimeUnit?.Description</div>
                                </nhs-table-cell>
                            </nhs-table-row-container>
                        }
                    </nhs-table>
                }
            </nhs-fieldset-form-container>
            <div data-test-id="continue-button">
                <a class="nhsuk-button nhsuk-u-margin-top-9" href="/order/organisation/@Model.OdsCode/order/@Model.CallOffId" draggable="false">
                    Continue
                </a>
            </div>
        </div>
    </div>
</div>
