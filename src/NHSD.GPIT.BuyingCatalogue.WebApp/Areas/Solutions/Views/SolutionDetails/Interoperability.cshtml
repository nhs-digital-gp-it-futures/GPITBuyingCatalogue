@model NHSD.GPIT.BuyingCatalogue.WebApp.Areas.Solutions.Models.InteroperabilityModel;

<article>
    <div class="nhsuk-grid-row">
        <div class="nhsuk-grid-column-full">
            <p>
                <strong>
                    View information about the systems this Catalogue Solution integrates with to exchange data:
                </strong>
            </p>
            <h2>
                NHS assured integrations
            </h2>
            <p>
                @Model.TextDescriptionsProvided() You can find more information about <a href="https://digital.nhs.uk/services/gp-it-futures-systems/im1-pairing-integration">IM1 integrations</a>
                and <a href="https://digital.nhs.uk/services/gp-connect">GP Connect integrations</a> on the NHS Digital website.
            </p>

            <h3>IM1 integrations</h3>

            @if (Model.IM1Integrations.Any())
            {
                @foreach (var qualifier in Model.IM1IntegrationQualifiers)
                {
                    <nhs-table label-text=@($"IM1 {qualifier}")>
                        <nhs-table-column>
                            Provider or consumer
                        </nhs-table-column>
                        <nhs-table-column>
                            System integrating with
                        </nhs-table-column>
                        <nhs-table-column>
                            Description
                        </nhs-table-column>
                        <nhs-table-column></nhs-table-column>
                        @foreach (var integration in Model.IM1Integrations.Where(i => i.Qualifier == qualifier))
                        {
                            <nhs-table-row-container>
                                <nhs-table-cell>
                                    @(integration.IsConsumer ? "Consumer" : "Provider")
                                </nhs-table-cell>
                                <nhs-table-cell>
                                    @integration.IntegratesWith
                                </nhs-table-cell>
                                <nhs-table-cell>
                                    <p class="nhsuk-u-margin-0">
                                        @integration.Description
                                    </p>
                                </nhs-table-cell>
                            </nhs-table-row-container>
                        }
                    </nhs-table>

                    <div class="nhsuk-u-margin-bottom-5">
                        <partial name="Partials/_BackToTop" />
                    </div>
                }
            }

            <h3>GP Connect integrations</h3>

            @if (Model.GpConnectIntegrations.Any())
            {
                @foreach (var qualifier in Model.GpConnectIntegrationQualifiers)
                {
                    <nhs-table label-text=@($"GP Connect {qualifier}")>
                        <nhs-table-column>
                            Provider or consumer
                        </nhs-table-column>
                        <nhs-table-column>
                            Additional information
                        </nhs-table-column>
                        <nhs-table-column></nhs-table-column>
                        @foreach (var integration in Model.GpConnectIntegrations.Where(i => i.Qualifier == qualifier))
                        {
                            <nhs-table-row-container>
                                <nhs-table-cell>
                                    @(integration.IsConsumer ? "Consumer" : "Provider")
                                </nhs-table-cell>
                                <nhs-table-cell>
                                    <p class="nhsuk-u-margin-0">
                                        @integration.AdditionalInformation
                                    </p>
                                </nhs-table-cell>
                            </nhs-table-row-container>
                        }
                    </nhs-table>

                    <div class="nhsuk-u-margin-bottom-5">
                        <partial name="Partials/_BackToTop" />
                    </div>
                }
            }
              
            <h2>Supplier asserted integrations</h2>
            <p>Supplier asserted integrations are interoperability interfaces prepared by a supplier and are not specified or assured by the NHS.</p>
            <p>
                <a href="https://www.caltechhealth.com/products/partner-products/" target="_blank">
                    View the Supplier Asserted Integrations for this Catalogue Solution
                </a>
            </p>
        </div>
    </div>
</article>
