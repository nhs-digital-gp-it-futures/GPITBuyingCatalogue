@using NHSD.GPIT.BuyingCatalogue.Framework.Extensions
@using NHSD.GPIT.BuyingCatalogue.WebApp.Areas.Admin.Controllers; 

@model NHSD.GPIT.BuyingCatalogue.WebApp.Areas.Admin.Models.SupplierModels.ManageSupplierContactsModel
@{
    ViewData["Title"] = $"{Model.SupplierName} contacts";
}

<partial name="Partials/_BackLink" model="Model" />
<div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">
        <nhs-validation-summary />
        <nhs-page-title title="@ViewData["Title"]"
                        advice="Provide information about the contacts for this supplier." />

        <vc:nhs-action-link url="@Url.Action(nameof(SuppliersController.AddSupplierContact),
                                             typeof(SuppliersController).ControllerName(),
                                             new { supplierId = Model.SupplierId })"
                            text="Add a contact" />

        <nhs-table>
            <nhs-table-column>Name</nhs-table-column>
            <nhs-table-column>Telephone number</nhs-table-column>
            <nhs-table-column>Email address</nhs-table-column>
            <nhs-table-column></nhs-table-column>
            @foreach (var contact in Model.Contacts)
            {
            <nhs-table-row-container>
                <nhs-table-cell>@contact.FirstName @contact.LastName</nhs-table-cell>
                <nhs-table-cell>@contact.PhoneNumber</nhs-table-cell>
                <nhs-table-cell>@contact.Email</nhs-table-cell>
                <nhs-table-cell>
                    <a asp-action="@nameof(SuppliersController.EditSupplierContact)"
                       asp-controller="@typeof(SuppliersController).ControllerName()"
                       asp-route-supplierId="@Model.SupplierId"
                       asp-route-contactId="@contact.Id">Edit</a>
                </nhs-table-cell>
            </nhs-table-row-container>
            }
        </nhs-table>

        <vc:nhs-secondary-button url="@Url.Action(
                                     nameof(SuppliersController.EditSupplier),
                                     typeof(SuppliersController).ControllerName(),
                                     new { supplierId = Model.SupplierId })"
                                 use-primary-colour="true"
                                 text="Continue" />
    </div>
</div>
