function ReplaceFilterAndAddBinders(n){const r=document.getElementById(filterContainer),t=document.getElementById("filter-form");t.parentNode.removeChild(t);r.innerHTML=n;const i=document.getElementById("Submit");i.removeAttribute("type");i.addEventListener("click",generateQueryParam);document.querySelectorAll(NhsRadiosInput).forEach(n=>{n.addEventListener("click",reload)});RefireDomContentLoadedEvent();reselectCapabilityAndEpicsFiltersAndFrameworkFilter()}function generateQueryParam(){let n="",i="#"+filterContainer+" "+NhsukCheckboxesInput;document.querySelectorAll(i).forEach(t=>{if(t.checked){const i=t.parentNode.querySelector(InputTypeHidden).getAttribute("value");n+=i.includes(EpicSplitCharacter)?i.substring(i.indexOf(EpicSplitCharacter)):n.length>1?CapabilitiesDelimiter+i:i}});const t=new URL(window.location.href);t.searchParams.delete("page");t.searchParams.delete(queryCapabilities);t.searchParams.delete(querySelectedFramework);n.length>0&&t.searchParams.append(queryCapabilities,n);t.searchParams.append(querySelectedFramework,GetSelectedFramework());window.location.href=t.toString()}function reload(){const i=GetSelectedFramework(),t=new URL(window.location.href);t.pathname+=filterUrl;t.searchParams.delete(querySelectedFramework);t.searchParams.append(querySelectedFramework,i);const n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState===4&&(n.status===200?refreshCapabilitiesAndEpics(n.responseText):console.log("Error: "+n.status))};n.open("GET",t.toString(),!0);n.send()}function refreshCapabilitiesAndEpics(n){const i=(new DOMParser).parseFromString(n,"text/html"),r=i.getElementById(filterCapabilitiesDetails).querySelector(filterDetailsText),t=document.getElementById(filterCapabilitiesDetails).querySelector(filterDetailsText);t.parentNode.removeChild(t);document.getElementById(filterCapabilitiesDetails).appendChild(r);RefireDomContentLoadedEvent()}function reselectCapabilityAndEpicsFiltersAndFrameworkFilter(){const r="FC",u="C",i=new URLSearchParams(window.location.search),n=i.get(queryCapabilities),t=i.get(querySelectedFramework);if(n&&n.length>0){const t=n.split(CapabilitiesDelimiter);t.forEach(n=>{if(n!==r&&n.includes(EpicSplitCharacter)){const t=n.split(EpicSplitCharacter);t.forEach(n=>{n.startsWith(u)?CheckCheckboxWithHiddenInputValue(n):CheckCheckboxWithHiddenInputValue(t[0]+EpicSplitCharacter+n)})}else CheckCheckboxWithHiddenInputValue(n)})}if(t&&t.length>0){const n=NhsRadiosInput+"[value='"+t+"']";document.querySelector(n).checked=!0}}function CheckCheckboxWithHiddenInputValue(n){const t="#"+filterContainer+" "+NhsukCheckboxesItem+" "+InputTypeHidden+"[value='"+n+"']";document.querySelector(t).parentNode.querySelector(NhsukCheckboxesInput).click()}function GetSelectedFramework(){const n=document.querySelectorAll(NhsRadiosInput);let t="All";for(let i=0;i<n.length;i++)if(n[i].checked){t=n[i].value;break}return t}function RefireDomContentLoadedEvent(){const t="DOMContentLoaded";let n;document.createEvent?(n=document.createEvent("HTMLEvents"),n.initEvent(t,!0,!0),n.eventName=t,document.dispatchEvent(n)):(n=document.createEventObject(),n.eventName=t,n.eventType=t,document.fireEvent("on"+n.eventType,n))}const filterUrl="/filter",queryCapabilities="capabilities",querySelectedFramework="selectedframework",filterContainer="filter-container",filterCapabilitiesDetails="filter-capabilities-details",filterDetailsText=".nhsuk-details__text",EpicSplitCharacter="E",InputTypeHidden="input[type='hidden']",NhsukCheckboxesInput=".nhsuk-checkboxes__input",NhsukCheckboxesItem=".nhsuk-checkboxes__item",NhsRadiosInput=".nhsuk-radios__input",CapabilitiesDelimiter="|";window.onload=function(){const n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState===4&&(n.status===200?ReplaceFilterAndAddBinders(n.responseText):console.log("Error: "+n.status))};const t=new URL(window.location.href);t.pathname+=filterUrl;const r=new URLSearchParams(window.location.search),i=r.get(querySelectedFramework);i&&i.length>0&&t.searchParams.append(querySelectedFramework,i);n.open("GET",t.toString(),!0);n.send()};