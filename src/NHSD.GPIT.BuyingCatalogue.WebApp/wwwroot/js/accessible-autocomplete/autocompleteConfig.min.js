class autocompleteConfig{constructor(t,e,n,i,o){this.modelId=t,this.ajaxUrl=e,this.queryParameterName=n,this.titleText=i,this.currentPageUrl=o,this.form=document.getElementById(t.concat("-search-form")),this.defaultInput=document.getElementById(t.concat("-form-input")),this.formInputLabel=document.getElementById(t.concat("-form-input-label"))}Implement(){this.defaultInput.parentNode.removeChild(this.defaultInput),this.formInputLabel.removeAttribute("for"),accessibleAutocomplete({element:document.getElementById(this.modelId.concat("-container")),id:this.modelId,source:this.source.bind(this),name:this.queryParameterName,confirmOnBlur:!1,onConfirm:this.onConfirm.bind(this),defaultValue:this.defaultValue(),minLength:2,templates:{inputValue:this.inputValue.bind(this),suggestion:this.suggestion.bind(this)}}),this.form&&this.addFormEvents()}source(t,e){const n=this.ajaxUrl.concat("?",this.queryParameterName,"=",t),i=new XMLHttpRequest;i.open("GET",n),i.onload=()=>{if(200===i.status){const t=JSON.parse(i.responseText);e(t)}},i.send()}suggestion(t){if(t.title&&t.category){const e=100,n=t.title.length>e?"...":"";return`<span class="autocomplete__option-title">${t.title.substring(0,e)+n}</span>\n\t\t\t\t\t\t${t.category?`<span class="autocomplete__option-category">${t.category}</span>`:""}\n\t\t\t\t\t  `}return""}inputValue(t){return t&&t.title?t.title.trim():""}onConfirm(t){window.location.href=t.url}addFormEvents(){this.form.addEventListener("keyup",(({key:t})=>{"Enter"===t&&document.activeElement.id===this.modelId&&this.form.submit()}))}defaultValue(){let t=new URLSearchParams(window.location.search);return t.has(this.queryParameterName)?t.get(this.queryParameterName):""}}